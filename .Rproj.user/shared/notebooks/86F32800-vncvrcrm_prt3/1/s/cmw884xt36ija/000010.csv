"0","crime %>% "
"0","  drop_na(any_of(c(""X"",""Y""))) %>% #tabyl(TYPE) %>% pull(TYPE) %>% str_c(""\'"",.,""\'"", collapse = "", "") %>% writeClipboard()"
"0","  filter(TYPE %in% c('Theft from Vehicle')) %>% "
"0","  # filter(TYPE %in% c('Theft from Vehicle', 'Theft of Bicycle', 'Theft of Vehicle', 'Vehicle Collision or Pedestrian Struck (with Fatality)', 'Vehicle Collision or Pedestrian Struck (with Injury)')) %>% "
"0","  st_as_sf(coords = c(""X"",""Y""),"
"0","           crs    = 26910,"
"0","           remove = TRUE) %>%   # keep X/Y in the output"
"0","  st_transform(crs = 4326) %>% "
"0","  mutate("
"0","    Longitude = st_coordinates(geometry)[,1],"
"0","    Latitude  = st_coordinates(geometry)[,2]"
"0","  ) %>%"
"0","  st_drop_geometry() %>% "
"0","  filter("
"0","    str_detect(HUNDRED_BLOCK, ""^\\s*$"", negate = T) &"
"0","    str_detect(NEIGHBOURHOOD, ""^\\s*$"", negate = T)"
"0","    ) %>% "
"0","  mutate("
"0","    Occurred = make_datetime(year = YEAR, month = MONTH, day = DAY, hour = HOUR, min = MINUTE, tz = ""America/Vancouver"")"
"0","  ) -> crime_clean"
"0","  "
